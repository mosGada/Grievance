<section class="content-header">
    <h1>
        Grievances Tickets
        <small>Log ticket</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard fa-lg"></i> Home</a></li>
        <li><a href="#">Grievances Tickets</a></li>
        <li class="active">Log ticket</li>
    </ol>
</section>

<section class="content">
    <div class="box box-default">
        <div class="box-header with-border">
            <h3 class="box-title">Ticket Owner Details</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                <!--<button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>-->
            </div>
        </div>

        <!-- /.box-header -->
        <div class="box-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Reference Number</label>
                        <input class="form-control input-sm" type="text" disabled ng-model="ticketUpdate.referenceNumber">
                    </div>
                    <!-- /.form-group -->
                    <div class="form-group">
                        <label>Type</label>
                        <select class="form-control" data-ng-model="ticketUpdate.ticketTypeId">
                            <option ng-repeat="type in Types" disabled data-ng-value="{{type.id}}">{{type.name}}</option>
                        </select>
                    </div>
                    <!-- /.form-group -->
                    <div class="form-group">
                        <label>Name</label>
                        <input class="form-control input-sm" type="text" disabled ng-disabled="ticketUpdate.ticketTypeId === 2" data-ng-model="oDetails.name">
                    </div>
                    <!-- /.form-group -->
                    <div class="form-group">
                        <label>Surname</label>
                        <input class="form-control input-sm" type="text" disabled ng-disabled="ticketUpdate.ticketTypeId === 2" data-ng-model="oDetails.surname">
                    </div>
                    <!-- /.form-group -->
                    <div class="form-group">
                        <label>ID Number</label>
                        <input class="form-control input-sm" type="text" disabled ng-disabled="ticketUpdate.ticketTypeId === 2" data-ng-model="oDetails.idNumber">
                    </div>

                    <!-- /.form-group -->
                </div>
                <!-- /.col -->
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Gender</label>
                        <select class="form-control input-sm" ng-disabled="ticketUpdate.ticketTypeId === 2" data-ng-model="oDetails.gender">
                            <option>{{oDetails.gender}}</option>
                        </select>
                    </div>
                    
                    <!-- /.form-group -->

                    <div class="form-group">
                        <label>Contact Number</label>
                        <input class="form-control input-sm" type="text" ng-disabled="ticketUpdate.ticketTypeId === 2" data-ng-model="oDetails.phoneNumber">
                    </div>
                    <!-- /.form-group -->
                    <div class="form-group">
                        <label>Email Address</label>
                        <input class="form-control input-sm" type="email" ng-disabled="ticketUpdate.ticketTypeId === 2" data-ng-model="oDetails.email">
                    </div>
                    <!-- /.form-group -->
                    <div class="form-group">
                        <label>Physical Address</label>
                        <input class="form-control input-sm" type="text" ng-disabled="ticketUpdate.ticketTypeId === 2" data-ng-model="oDetails.physicalAddress">
                    </div>
                    <!-- /.form-group -->
                    <!--<div class="box-footer">
                        <button type="submit" class="btn btn-primary" ng-click="response()" ng-disabled="ticketOwner.ticketTypeId === 2">Search</button>
                    </div>-->
                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
    </div>

    <div class="box box-default">
        <div class="box-header with-border">
            <h3 class="box-title">Ticket Details</h3>
            <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                <!--<button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-remove"></i></button>-->
            </div>
        </div>
        <!-- /.box-header -->
        <div class="box-body">
            <div class="row">
                <div class="col-md-6">
                    <!-- /.form-group -->
                    <div class="form-group">
                        <label>Subject</label>
                        <input class="form-control input-sm" type="text" ng-model="ticketUpdate.name">
                    </div>
                    <!-- /.form-group -->
                    <div class="form-group">
                        <label>Description</label>
                        <textarea class="form-control input-sm" type="text" data-ng-model="ticketUpdate.description"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select class="form-control" data-ng-model="ticketUpdate.ticketCategoryId">
                            <option ng-repeat="category in Categories" data-ng-value="{{category.id}}">{{category.name}}</option>
                        </select>
                    </div>
                    <!-- /.form-group -->
                    <div class="form-group">
                        <label>Department</label>
                        <!--<div class="col-lg-8">-->
                        <select class="form-control" data-ng-model="ticketUpdate.departmentId">
                            <option ng-repeat="department in Departments" data-ng-value="{{department.id}}">{{department.name}}</option>
                        </select>
                        <!--</div>-->
                    </div>
                    <!-- /.form-group -->
                </div>
                <!-- /.col -->
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Cause of issue</label>
                        <select class="form-control" data-ng-model="ticketUpdate.ticketIssueId">
                            <option ng-repeat="issue in Issues" data-ng-value="{{issue.id}}">{{issue.name}}</option>
                        </select>
                    </div>
                    <!-- /.form-group -->

                    <div class="form-group">
                        <label>Priority</label>
                        <select class="form-control" data-ng-model="ticketUpdate.ticketPriorityId">
                            <option ng-repeat="priority in Priorities" data-ng-value="{{priority.id}}">{{priority.name}}</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Status</label>
                        <select class="form-control" data-ng-model="ticketUpdate.ticketStatusId">
                            <option ng-repeat="stat in Status" data-ng-value="{{stat.id}}">{{stat.name}}</option>
                        </select>
                    </div>

                    <!-- /.form-group -->
                    <div class="form-group">
                        <label>Assign To</label>
                        <select class="form-control" data-ng-model="ticketUpdate.AssignedTo">
                            <option ng-repeat="asign in Assign" data-ng-value="{{asign.id}}">{{asign.name}}</option>
                        </select>
                        <!--<select class="form-control" data-ng-model="ticketUpdate.AssignedTo"
                                ng-options="asign.id as asign.name for asign in Assign">
                        </select>-->
                    </div>

                    <div class="box-footer">
                        <!--<button type="submit" class="btn btn-primary" data-ng-click="saveTicketOwner()">Add</button>-->
                        <button type="submit" class="btn btn-danger" ng-click="updateTicket()">{{buttonName}}</button>
                    </div>

                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /.box-body -->
    </div>

    <div class="box box-default"data-ng-show="showChatTag">
        <!-- /.box-header -->
        <div class="box-body">
            <div class="row">
                <div class="col-lg-12">
                        <!-- DIRECT CHAT -->
                        <div class="box box-danger direct-chat direct-chat-danger">
                            <div class="box-header with-border">
                                <h3 class="box-title">Direct Chat - Remarks</h3>
                                <div class="box-tools pull-right">
                                    <!--<button type="button" class="btn btn-box-tool" data-toggle="tooltip" title="Contacts" data-widget="chat-pane-toggle"></button>-->
                                        <button type="button" class="btn btn-box-tool" data-widget="remove">
                                            <i class="fa fa-times"></i>
                                        </button>
</div>
                            </div>
                            <!-- /.box-header -->

                            <div class="box-body">
                                <!--<div class="direct-chat-messages">
                                </div>-->
                                <!--/.direct-chat-messages-->
                                <!-- Contacts are loaded here -->
                                <div class="direct-chat-messages">
                                    <ul class="contacts-list">
                                        <li>
                                            <a href="#">
                                                <div class="contacts-list-info" ng-repeat="(key, value) in Remarks | groupBy: '[ticketId]'">
                                                    <div class="direct-chat-text" ng-repeat="remk in value">
                                                        <span class="contacts-list-name">
                                                            <label>{{remk.createdBy}}</label>
                                                            <small class="contacts-list-date pull-right">{{ remk.createdDate | date : format : medium}}</small>
                                                        </span>
                                                        <span ng-if="remk.type != 'File'" class="contacts-list-msg">{{remk.description}}</span>
                                                        <span ng-if="remk.type == 'File'"class="contacts-list-msg"><img src="{{remk.description}}" width="300" height="300" /></span>
                                                    </div>
                                                </div>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <!-- /.box-body -->
                            <div class="box-footer">
                                <form action="#" method="post">
                                    <div class="input-group">
                                        <input type="text" name="message" placeholder="Type Message ..." data-ng-model="ticketRemarks.description" class="form-control">
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-danger btn-flat" ng-click="saveTicketRemarks()">Send</button>
                                        </span>
                                    </div>
                                </form>
                            </div>
                            <!-- /.box-footer-->
                        </div>
                        <!--/.direct-chat -->
                </div>

                <!-- /.col -->
                <div class="col-md-12">
                    <!--<div class="form-group">
                        <label>Remarks</label>
                        <textarea class="form-control input-sm" type="text" data-ng-model="ticketRemarks.remark"></textarea>
                    </div>-->

                    <!-- /.form-group -->
                    <!--<div class="box-footer">
                        <button type="submit" class="btn btn-primary" ng-click="updateTicket()">Update</button>
                    </div>-->
                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /.box-body -->
    </div>
</section>

